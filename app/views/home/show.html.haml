.content
  %h1= format_quarter_date @filter_date
  .row
    .col-sm-6
      .panel.panel-default
        .panel-heading
          %h3.panel-title Expenses
        .panel-body
          %ul
            %li= "Total expenses: #{number_to_currency @expenses.sum(:total_price)}"
            %li= "Total tax: #{number_to_currency @expenses.sum(:tax_price)}"
            %li= "Total net expenses: #{number_to_currency @expenses.sum(:total_price) - @expenses.sum(:tax_price)}"
    .col-sm-6
      .panel.panel-default
        .panel-heading
          %h3.panel-title Invoiced
        .panel-body
          %ul
            %li= "Total invoices: #{number_to_currency @invoices.sum(:total_price)}"
            %li= "Total tax: #{number_to_currency @invoices.sum(:tax_price)}"
            %li= "Total net income: #{number_to_currency @invoices.sum(:total_price) - @invoices.sum(:tax_price)}"

  .row
    %nav
      %ul.pager
        %li.previous= previous_paginator_tag(@filter_date).html_safe
        %li.current= current_paginator_tag(Date.today).html_safe
        %li.next= next_paginator_tag(@filter_date).html_safe
  
  .row
    %h3 Invoices

    %table.table.table-hover.table-bordered
      %thead
        %tr
          %th Invoiced at
          %th Name
          %th Total price
          %th.hidden-xs Tax price
          %th.hidden-xs{ colspan: '1' }

      %tbody
        - @invoices.each do |invoice|
          %tr
            %td= l invoice.invoiced_at, format: :long
            %td
              - if invoice.complete?
                = invoice.name
              - else
                %span.label.label-danger= invoice.name
            %td= number_to_currency invoice.total_price
            %td.hidden-xs= number_to_currency invoice.tax_price
            %td.hidden-xs
              = link_to 'edit', edit_invoice_path(invoice)
              = '-'
              = link_to 'destroy', invoice, method: :delete, data: { confirm: 'Are you sure?' }
  .row
    %h3 Expenses

    %table.table.table-hover.table-bordered
      %thead
        %tr
          %th Issued at
          %th Description
          %th Total price
          %th.hidden-xs Tax price
          %th.hidden-xs{ colspan: '1' }

      %tbody
        - @expenses.each do |expense|
          %tr
            %td= l expense.issued_at, format: :long
            %td
              - if expense.complete?
                = expense.description
              - else
                %span.label.label-danger= expense.description
            %td= number_to_currency expense.total_price
            %td.hidden-xs= number_to_currency expense.tax_price
            %td.hidden-xs
              = link_to 'edit', edit_expense_path(expense)
              = '-'
              = link_to 'destroy', expense, method: :delete, data: { confirm: 'Are you sure?' }
